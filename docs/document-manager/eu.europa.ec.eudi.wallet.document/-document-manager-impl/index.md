//[document-manager](../../../index.md)/[eu.europa.ec.eudi.wallet.document](../index.md)/[DocumentManagerImpl](index.md)

# DocumentManagerImpl

class [DocumentManagerImpl](index.md)(storageEngine: StorageEngine, secureArea: SecureArea,
createKeySettingsFactory: [CreateKeySettingsFactory](../-create-key-settings-factory/index.md),
keyUnlockDataFactory: [KeyUnlockDataFactory](../-key-unlock-data-factory/index.md), var
checkPublicKeyBeforeAdding: [Boolean](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html) =
true) : [DocumentManager](../-document-manager/index.md)

A [DocumentManager](../-document-manager/index.md) implementation that uses StorageEngine to store
documents and SecureArea for key management.

To instantiate it, use the [eu.europa.ec.eudi.wallet.document.DocumentManager.Builder](../-document-manager/-builder/index.md) class.

#### Parameters

androidJvm

|                            |                                                                                                                                  |
|----------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| storageEngine              | storage engine used to store documents                                                                                           |
| secureArea                 | secure area used to store documents' keys                                                                                        |
| createKeySettingsFactory   | factory to create CreateKeySettings for document keys                                                                            |
| checkPublicKeyBeforeAdding | flag that indicates if the public key in the [UnsignedDocument](../-unsigned-document/index.md) must match the public key in MSO |

## Constructors

|                                                  |                                                                                                                                                                                                                                                                                                                                                                                              |
|--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [DocumentManagerImpl](-document-manager-impl.md) | [androidJvm]<br>constructor(storageEngine: StorageEngine, secureArea: SecureArea, createKeySettingsFactory: [CreateKeySettingsFactory](../-create-key-settings-factory/index.md), keyUnlockDataFactory: [KeyUnlockDataFactory](../-key-unlock-data-factory/index.md), checkPublicKeyBeforeAdding: [Boolean](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html) = true) |

## Types

| Name | Summary |
|---|---|
| [Companion](-companion/index.md) | [androidJvm]<br>object [Companion](-companion/index.md) |

## Properties

| Name                                                            | Summary                                                                                                                                                                                                                                                                                                     |
|-----------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [checkPublicKeyBeforeAdding](check-public-key-before-adding.md) | [androidJvm]<br>var [checkPublicKeyBeforeAdding](check-public-key-before-adding.md): [Boolean](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)<br>flag that indicates if the public key in the [UnsignedDocument](../-unsigned-document/index.md) must match the public key in MSO |

## Functions

| Name                                                            | Summary                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|-----------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [checkPublicKeyBeforeAdding](check-public-key-before-adding.md) | [androidJvm]<br>fun [checkPublicKeyBeforeAdding](check-public-key-before-adding.md)(check: [Boolean](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html)): [DocumentManagerImpl](index.md)<br>Sets whether to check public key in MSO before adding document to storage. By default this is set to true. This check is done to prevent adding documents with public key that is not in MSO. The public key from the [UnsignedDocument](../-unsigned-document/index.md) must match the public key in MSO.                                                                                                                                                                                                                                                                                                                                              |
| [createDocument](create-document.md)                            | [androidJvm]<br>open override fun [createDocument](create-document.md)(docType: [String](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html), useStrongBox: [Boolean](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html), attestationChallenge: [ByteArray](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)?): [CreateDocumentResult](../-create-document-result/index.md)<br>Creates a [UnsignedDocument](../-unsigned-document/index.md) for a given docType which can be then used to issue the document from the issuer. The [UnsignedDocument](../-unsigned-document/index.md) contains the certificate that must be sent to the issuer and implements [UnsignedDocument.signWithAuthKey](../-unsigned-document/sign-with-auth-key.md) to sign the proof of possession if needed by the issuer. |
| [deleteDocumentById](delete-document-by-id.md)                  | [androidJvm]<br>open override fun [deleteDocumentById](delete-document-by-id.md)(documentId: [DocumentId](../-document-id/index.md)): [DeleteDocumentResult](../-delete-document-result/index.md)<br>Delete document by id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [getDocumentById](get-document-by-id.md)                        | [androidJvm]<br>open override fun [getDocumentById](get-document-by-id.md)(documentId: [DocumentId](../-document-id/index.md)): [Document](../-document/index.md)?<br>Get document by id                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [getDocuments](get-documents.md)                                | [androidJvm]<br>open override fun [getDocuments](get-documents.md)(state: [Document.State](../-document/-state/index.md)?): [List](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)&lt;[Document](../-document/index.md)&gt;<br>Retrieve all documents                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [getDocuments](../get-documents.md)                             | [androidJvm]<br>inline fun &lt;[D](../get-documents.md) : [Document](../-document/index.md)&gt; [DocumentManager](../-document-manager/index.md).[getDocuments](../get-documents.md)(): [List](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html)&lt;[D](../get-documents.md)&gt;<br>Extension function for [DocumentManager](../-document-manager/index.md) to get documents using reified type parameter                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [storeDeferredDocument](store-deferred-document.md)             | [androidJvm]<br>open override fun [storeDeferredDocument](store-deferred-document.md)(unsignedDocument: [UnsignedDocument](../-unsigned-document/index.md), relatedData: [ByteArray](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)): [StoreDocumentResult](../-store-document-result/index.md)<br>Stores a [UnsignedDocument](../-unsigned-document/index.md) as [DeferredDocument](../-deferred-document/index.md). The document can be retrieved using the [DocumentManager.getDocumentById](../-document-manager/get-document-by-id.md) method. Also, the relatedData can be used later for the issuance process.                                                                                                                                                                                                                         |
| [storeIssuedDocument](store-issued-document.md)                 | [androidJvm]<br>open override fun [storeIssuedDocument](store-issued-document.md)(unsignedDocument: [UnsignedDocument](../-unsigned-document/index.md), issuerDocumentData: [ByteArray](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-byte-array/index.html)): [StoreDocumentResult](../-store-document-result/index.md)<br>Add document to the document manager.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
